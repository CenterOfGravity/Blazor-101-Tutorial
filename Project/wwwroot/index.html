<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Project</title>
    <base href="/" />
    <link href="css/app.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <!-- If you add any scoped CSS files, uncomment the following to load them-->
    <link href="Project.styles.css" rel="stylesheet" />
</head>

<body>
    <div id="app">Loading...</div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>

    <script>
        width = function () {
            return window.innerWidth;
        };
    </script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, sendEmailVerification } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBweY0K13TldzPKvvXGB6CQQoOCxq-vYBc",
            authDomain: "project-18395.firebaseapp.com",
            projectId: "project-18395",
            storageBucket: "project-18395.appspot.com",
            messagingSenderId: "729063269694",
            appId: "1:729063269694:web:e6b5b4141d6e319142386f"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        // Initialize Firebase Authentication and get a reference to the service
        const auth = getAuth(app);

        var actionCodeSettings = {
            url: 'https://localhost:7152/'
        };

        window.CreateUserWithEmailAndPassword = async function(email, password)
        {
            var IsSignedIn = false;
            await createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in 
                    const user = userCredential.user;
                    IsSignedIn = true;
                    // ...
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    IsSignedIn = false;
                    // ..
                });
            password = "";
            return IsSignedIn;
        }

        window.SendEmailVerification = async function (ShouldSendAlert) {
            await sendEmailVerification(auth.currentUser, actionCodeSettings)
                .then(() => {
                    // Email verification sent!
                    // ...
                    if (ShouldSendAlert) {
                        alert("Verification email sent");
                    }
                }).catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    // ..
                });
        }
    </script>
</body>

</html>
